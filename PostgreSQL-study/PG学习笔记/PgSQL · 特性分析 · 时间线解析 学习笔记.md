# PgSQL · 特性分析 · 时间线解析 学习笔记

by 刘海峰 2021.01.22

http://mysql.taobao.org/monthly/2015/07/03/



时间线目的是为了避免这种情况，需要区分原始数据库历史生成的WAL文件和完成恢复之后继续运行产生的（重名的）新WAL文件。

设置好recovery.conf文件后，启动数据库，将会产生新的timeline，而且会生成一个新的history文件

当数据库在从包含多个时间线的归档中恢复时，这些history文件允许系统选取正确的WAL文件，当然，它也能像WAL文件一样被归档到WAL归档目录里。历史文件只是很小的文本文件，所以保存它们的代价很小。

## 总结

PG中通过timeline机制能够方便地实现数据库恢复到任意时间点，这对我们数据库备份有重要的作用。我们可以在数据库的使用中合理地备份和归档我们的数据，一旦数据出现丢失或损坏，我们都能有条不紊的使用timeline机制恢复出来我们需要的数据。

时间线和在线恢复(crash Recovery)没有关系.